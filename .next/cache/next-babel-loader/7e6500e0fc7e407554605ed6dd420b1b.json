{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/*eslint-disable*/\nimport React from \"react\";\nimport { useEffect, useState } from 'react'; // react components for routing our app without refresh\n\nimport Link from \"next/link\";\nimport Router from 'next/router';\n// @material-ui/core components\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Icon from \"@material-ui/core/Icon\"; // @material-ui/icons\n\nimport Email from \"@material-ui/icons/Email\";\nimport Favorite from \"@material-ui/icons/Favorite\";\nimport AssignmentInd from \"@material-ui/icons/AssignmentInd\"; // core components\n\nimport Head from 'next/head';\nimport Header from \"components/Header/Header.js\";\nimport HeaderLinks from \"components/Header/HeaderLinks.js\";\nimport Footer from \"components/Footer/Footer.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CustomInput from \"components/CustomInput/CustomInput.js\";\nimport SnackbarContent from \"components/Snackbar/SnackbarContent.js\";\nimport Input from '@material-ui/core/Input';\nimport MaskedInput from 'react-text-mask';\nimport SectionFooter from \"pages-sections/footer/SectionFooter.js\";\nimport axios from 'axios';\nimport loginPageStyle from \"assets/jss/nextjs-material-kit-pro/pages/loginPageStyle.js\";\nimport image from \"assets/img/bg7.jpg\";\n\nfunction TextMaskCustom(props) {\n  const {\n    inputRef\n  } = props,\n        other = _objectWithoutProperties(props, [\"inputRef\"]);\n\n  return __jsx(MaskedInput, _extends({}, other, {\n    ref: ref => {\n      inputRef(ref ? ref.inputElement : null);\n    } // mask={['(', /[1-9]/, /\\d/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, /\\d/]}\n    ,\n    mask: [/[0-9]/, /[0-9]/, /[0-9]/, '.', /[0-9]/, /[0-9]/, /[0-9]/, '.', /[0-9]/, /[0-9]/, /[0-9]/, '-', /[0-9]/, /[0-9]/] // placeholderChar={'\\u2000'}\n    ,\n    showMask: true\n  }));\n}\n\nconst useStyles = makeStyles(loginPageStyle);\nexport default function LoginPage() {\n  React.useEffect(() => {\n    window.scrollTo(0, 0);\n    document.body.scrollTop = 0;\n  }, []);\n  const [values, setValues] = React.useState({\n    textmask: '(1  )    -    ',\n    numberformat: '1320'\n  });\n  const {\n    0: cpfUser,\n    1: setCpfUser\n  } = useState(\"\");\n\n  const handleFocus = event => event.target.select(); // const [user, setUser] = useState({\n  //   nome: \"\",\n  //   email: \"\",\n  //   cpf: \"\",\n  // });\n\n\n  const {\n    0: user,\n    1: setUser\n  } = useState({});\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const {\n    0: errorMessage,\n    1: setErrorMessage\n  } = useState({\n    title: \"\",\n    message: \"\"\n  });\n  const {\n    0: dangerError,\n    1: setDangerError\n  } = useState(false);\n  const {\n    0: faleConosco,\n    1: setFaleConosco\n  } = useState(false);\n\n  const fetchData = async cpf => {\n    // await axios.get(`https://api.fale.justfit.com.br/fechamentounidade/consultaExtrato?cpf=${cpf} 389.727.318-70`)\n    await axios.get(`https://api.fale.justfit.com.br/fechamentounidade/consultaExtrato?cpf=${cpf}`).then(res => {\n      setError(false); // setUsers(prevState => [...prevState, ...res.data]);\n\n      setUser(res.data); // console.log(res.data.cliente);\n\n      if (res.data.error) {\n        console.log(error);\n\n        switch (res.data.error) {\n          case 'Cliente já possue uma oferta cadastrada.':\n            setErrorMessage({\n              title: \"Você já selecionou uma oferta\",\n              message: \"Em caso de dúvida, envie uma mensagem no fale conosco\"\n            });\n            setFaleConosco(true);\n            break;\n\n          default:\n            setErrorMessage({\n              title: res.data.error,\n              // message: \"Verifique seu CPF e tente novamente\"\n              message: \"\"\n            });\n            break;\n        }\n\n        setError(true);\n      } else {\n        localStorage.setItem('@justfit/user', JSON.stringify(res.data));\n        Router.push('/menu');\n      }\n    }).catch(error => {\n      console.log(error);\n      setDangerError(true);\n    }).finally(() => {\n      setLoading(false);\n    });\n  }; // React.useEffect(() => {\n  //   fetchData();\n  // }, []);\n\n\n  React.useEffect(() => {// console.log(user);\n  }, [user]); // function handleClick(event) {\n  //   e.preventDefault();\n  //   console.log('O link foi clicado.');\n  //   alert(cpfUser);\n  //   console.log(cpfUser);\n  // }\n  // function handleChange(event) {\n  //   setError(false);\n  //   event.preventDefault();      \n  //   setCpfUser(event.target.value);       \n  // }\n\n  function handleClick(event) {\n    event.preventDefault();\n    setCpfUser(\"\");\n    setError(false);\n    setFaleConosco(false);\n  }\n\n  function handleChange(event) {\n    setError(false);\n    setDangerError(false);\n    event.preventDefault();\n    setCpfUser(event.target.value);\n  }\n\n  ;\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setLoading(true);\n    fetchData(cpfUser);\n  };\n\n  const classes = useStyles();\n  return __jsx(\"div\", null, __jsx(Head, null, __jsx(\"title\", null, \"Hist\\xF3rico do Aluno - Just Fit\")), __jsx(Header, {\n    absolute: true,\n    color: \"transparent\" // brand=\"NextJS Material Kit PRO\"\n    // imgBrand={image}\n    ,\n    links: __jsx(HeaderLinks, {\n      dropdownHoverColor: \"info\"\n    })\n  }), __jsx(\"div\", {\n    className: classes.pageHeader,\n    style: {\n      backgroundSize: \"cover\",\n      backgroundPosition: \"top center\"\n    }\n  }, __jsx(\"div\", {\n    className: classes.container\n  }, __jsx(GridContainer, {\n    justify: \"center\"\n  }, __jsx(GridItem, {\n    xs: 12,\n    sm: 8,\n    md: 4\n  }, __jsx(Card, null, __jsx(\"form\", {\n    className: classes.form,\n    onSubmit: handleSubmit\n  }, __jsx(CardHeader, {\n    color: \"info\",\n    signup: true,\n    className: classes.cardHeader\n  }, __jsx(\"h4\", {\n    className: classes.cardTitle\n  }, \"Digite o seu CPF\")), __jsx(CardBody, {\n    signup: true\n  }, dangerError && __jsx(SnackbarContent, {\n    message: __jsx(\"span\", null, __jsx(\"b\", null, \"Erro ao buscar os dados:\"), \" Tente novamente mais tarde\") // close\n    ,\n    color: \"danger\",\n    icon: \"info_outline\"\n  }), error && __jsx(SnackbarContent, {\n    message: __jsx(\"span\", null, __jsx(\"b\", null, errorMessage.title), \" \", __jsx(\"br\", null), \" \", errorMessage.message) // close\n    ,\n    color: \"warning\",\n    icon: \"info_outline\"\n  }), !faleConosco && __jsx(CustomInput, {\n    id: \"cpf\",\n    formControlProps: {\n      fullWidth: true\n    },\n    inputProps: {\n      placeholder: \"CPF...\",\n      type: \"text\",\n      value: cpfUser,\n      onChange: handleChange,\n      onFocus: handleFocus,\n      inputComponent: TextMaskCustom,\n      startAdornment: __jsx(InputAdornment, {\n        position: \"start\"\n      }, __jsx(AssignmentInd, {\n        className: classes.inputIconsColor\n      }))\n    }\n  })), __jsx(\"div\", {\n    className: classes.textCenter\n  }, loading && __jsx(CircularProgress, {\n    style: {\n      color: \"#cad300\"\n    },\n    size: 30\n  }), !loading && !faleConosco && __jsx(Button, {\n    button: true,\n    round: true,\n    color: \"primary\",\n    size: \"lg\",\n    type: \"submit\",\n    value: \"Submit\"\n  }, \"Ver meu extrato\"), faleConosco && __jsx(React.Fragment, null, __jsx(Button, {\n    button: true,\n    round: true,\n    color: \"primary\",\n    size: \"lg\",\n    href: \"https://justfit.com.br/fale-conosco/\"\n  }, \"Ir para Fale Conosco\"), __jsx(\"br\", null), __jsx(Button, {\n    button: true,\n    round: true,\n    color: \"secondary\",\n    size: \"lg\",\n    onClick: handleClick\n  }, \"Voltar\")))))))), __jsx(SectionFooter, null)));\n}","map":null,"metadata":{},"sourceType":"module"}